The modified code is in makeargv.c. Sample output:
$ ./argtest "hello world test 123"
The argument array contains:
0:hello
1:world
2:test
3:123

Strtok_r modifies the saveptr parameter, using it as scratch space. It is re-entrant: because
it uses saveptr rather than a static buffer, it can be overlapped by calls to different strings.
The book doesn't really define "thread-safe", but as re-entrant doesn't imply thread-safe, this
doesn't necessarily make strtok_r thread-safe.